{"version":3,"sources":["webpack:///src/pages/Home.vue","webpack:///./src/pages/Home.vue?1be7","webpack:///./src/pages/Home.vue"],"names":["Home","name","components","data","records","now_date","now_month","weekdays","total","transitionName","isCount","computed","emptyLen","this","day","methods","initData","Object","js_date","getStore","year","months","month","reduce","prev","next","isActive","obj","date","_ref","_this","arguments","length","undefined","cb","$vlf","createInstance","storeName","then","asyncToGenerator_default","regenerator_default","a","mark","_callee","store","wrap","_context","getItem","sent","setItem","call","stop","_x2","apply","swipeLeft","_this2","parseInt","Date","setTimeout","swipeRight","_this3","created","_$route$query","$route","query","_date","pages_Home","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","attrs","_e","staticClass","_v","_l","weekday","i","key","_s","dateObj","class","active","to","tag","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.7e381a75fdb3b1174e7d.js","sourcesContent":["<template>\r\n\r\n  <div  \r\n      v-swipeLeft=\"swipeLeft\"\r\n      v-swipeRight=\"swipeRight\"\r\n      >\r\n    <transition :name=\"transitionName\">\r\n      <div class=\"my-width text-center\"\r\n          v-if=\"!isCount\">\r\n          <DateTitle\r\n          :year=\"now_date.year\"\r\n          :month=\"now_date.month\"\r\n          ></DateTitle>\r\n        <ul class=\"calendar--weekdays flex between\">\r\n          <li \r\n            class=\"calnedar--weekday\"\r\n            v-for=\"(weekday,i) in weekdays\"\r\n            :key=\"i\">{{weekday}}</li>\r\n        </ul>\r\n\r\n        <ul class=\"calendar--lists flex wrap\">\r\n          <li\r\n            :class=\"['calendar--item']\"\r\n            v-for=\"(dateObj,i) in (emptyLen - 1)\"\r\n            :key=\"i\">{{dateObj._date}}</li>\r\n          <router-link\r\n            :to=\"`/detail/?year=${dateObj.year}&month=${dateObj._month}&date=${dateObj._date}`\"\r\n            tag=\"li\"\r\n            :class=\"['calendar--item',\r\n            {\r\n              active: isActive(dateObj)\r\n            }]\"\r\n            v-for=\"(dateObj,i) in now_month\"\r\n            :key=\"i + emptyLen\">\r\n            <div class=\"calendar--item__date\">{{dateObj._date}}</div>\r\n            <div class=\"calendar--item__total\">{{dateObj.total || 0}}元</div>\r\n          </router-link>\r\n        </ul>\r\n\r\n        <div class=\"total--price\">累计消费：<span class=\"total--price__num\">{{total}}</span>元</div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n  getDateInfo,\r\n  getYear\r\n} from '@/../static/js/date.js'\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n\r\n  },\r\n  data(){\r\n    return {\r\n      records : [],\r\n      now_date: {},\r\n      now_month: [],\r\n      weekdays:['一','二','三','四','五','六','日'],\r\n      total: 0,\r\n      transitionName: '',\r\n      isCount: false\r\n    }\r\n  },\r\n  computed:{\r\n    emptyLen() {\r\n      return this.now_month && this.now_month[0] && this.now_month[0].day || 1;\r\n    }\r\n  },\r\n  methods:{\r\n    initData(now_date) {\r\n      \r\n      var now_date = now_date || getDateInfo();\r\n      this.now_date = now_date;\r\n      this.getStore(now_date.year + \"\",function(records) {\r\n        let months = records[now_date.month - 1];\r\n        this.now_month = months;\r\n        this.total = months.reduce((prev,next)=> prev + (next.total || 0) ,0);\r\n      });\r\n    },\r\n    isActive(obj) {\r\n      var now_date = this.now_date;\r\n      return obj.year == now_date.year && obj.month == now_date.month && obj.date == now_date.date;\r\n    },\r\n    getStore(year = (getDateInfo().year + \"\"),cb) {\r\n      this.$vlf.createInstance({\r\n        storeName: 'record'\r\n      }).then(async (store) => {\r\n          var records = await store.getItem(year);\r\n          if(!records) {\r\n            records = getYear(year);\r\n            store.setItem(year, records);\r\n          } else {\r\n            this.records = records;\r\n          }\r\n          cb && cb.call(this,records);\r\n      })\r\n    },\r\n    swipeLeft() {\r\n      this.transitionName = 'slide-right';\r\n      this.isCount = true;\r\n      var { now_date } = this;\r\n      var { year, month, date } = now_date;\r\n      if( parseInt(month) == 12 ) {\r\n        year = year + 1;\r\n        month = 1;\r\n      } else {\r\n        month = parseInt(month) +1 ;\r\n      }\r\n      var now_date = getDateInfo(new Date(year,month - 1,date));\r\n      this.initData(now_date);\r\n      setTimeout(()=>{\r\n        this.isCount = false;\r\n      },50)\r\n    },\r\n    swipeRight() {\r\n      this.transitionName = 'slide-left';\r\n      this.isCount = true;\r\n      var { now_date } = this;\r\n      var { year, month, date } = now_date;\r\n      if( parseInt(month) == 1 ) {\r\n        year = year - 1;\r\n        month = 12;\r\n      } else {\r\n        month = parseInt(month) - 1 ;\r\n      }\r\n      \r\n      var now_date = getDateInfo(new Date(year,month - 1,date));\r\n      this.initData(now_date);\r\n      setTimeout(()=>{\r\n        this.isCount = false;\r\n      },50)\r\n    }\r\n  },\r\n  created() {\r\n    var { month,year } = this.$route.query;\r\n    if(month && year) {\r\n      var now_date = getDateInfo(new Date(year,month - 1, getDateInfo()._date ));\r\n      this.initData(now_date);\r\n    } else {\r\n      this.initData();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import './static/css/app.scss';\r\n.total--price {\r\n  border-top: 1px solid #eee;\r\n  margin-top: 20px;\r\n  padding: 20px 0 0 20px;\r\n  text-align: left;\r\n  font-size: 16px;\r\n  color: #999;\r\n}\r\n.total--price__num {\r\n  font-size: 20px;\r\n  color: #333;\r\n  padding: 0 12px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"swipeLeft\",rawName:\"v-swipeLeft\",value:(_vm.swipeLeft),expression:\"swipeLeft\"},{name:\"swipeRight\",rawName:\"v-swipeRight\",value:(_vm.swipeRight),expression:\"swipeRight\"}]},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[(!_vm.isCount)?_c('div',{staticClass:\"my-width text-center\"},[_c('DateTitle',{attrs:{\"year\":_vm.now_date.year,\"month\":_vm.now_date.month}}),_vm._v(\" \"),_c('ul',{staticClass:\"calendar--weekdays flex between\"},_vm._l((_vm.weekdays),function(weekday,i){return _c('li',{key:i,staticClass:\"calnedar--weekday\"},[_vm._v(_vm._s(weekday))])})),_vm._v(\" \"),_c('ul',{staticClass:\"calendar--lists flex wrap\"},[_vm._l(((_vm.emptyLen - 1)),function(dateObj,i){return _c('li',{key:i,class:['calendar--item']},[_vm._v(_vm._s(dateObj._date))])}),_vm._v(\" \"),_vm._l((_vm.now_month),function(dateObj,i){return _c('router-link',{key:i + _vm.emptyLen,class:['calendar--item',\n          {\n            active: _vm.isActive(dateObj)\n          }],attrs:{\"to\":(\"/detail/?year=\" + (dateObj.year) + \"&month=\" + (dateObj._month) + \"&date=\" + (dateObj._date)),\"tag\":\"li\"}},[_c('div',{staticClass:\"calendar--item__date\"},[_vm._v(_vm._s(dateObj._date))]),_vm._v(\" \"),_c('div',{staticClass:\"calendar--item__total\"},[_vm._v(_vm._s(dateObj.total || 0)+\"元\")])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"total--price\"},[_vm._v(\"累计消费：\"),_c('span',{staticClass:\"total--price__num\"},[_vm._v(_vm._s(_vm.total))]),_vm._v(\"元\")])],1):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a2c07630\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a2c07630\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a2c07630\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}